<!doctype html>
<html>
    <head>
	<title>p5js Test</title>

	<script
	    src="https://code.jquery.com/jquery-3.3.1.min.js"
	    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	    crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.2/dat.gui.js"></script>

	<script src="/socket.io/socket.io.js"></script>
	<script>
	  var socket = io();
	</script>

	<script>

    var GUIElement = function(){
       this.buildingSize = 5;
       this.triggerLoire = 1;
       this.isLoireTriggered = false;
    }


    $(document).ready(function(){

      var GUIElement_param = new GUIElement();

      var gui = new dat.gui.GUI();
      var buildingSize_controller = gui.add(GUIElement_param, 'buildingSize', 1, 40);
      var triggerLoire_controller = gui.add(GUIElement_param, 'triggerLoire', 0, 1).listen();
      var isLoireTriggered_controller = gui.add(GUIElement_param, 'isLoireTriggered');

      buildingSize_controller.onChange(function(value){
        socket.emit('buildingSize', value);
      });

      var update = function() {
        requestAnimationFrame(update);

        if(GUIElement_param.isLoireTriggered){
          GUIElement_param.triggerLoire = Math.random(0, 1);
          socket.emit('triggerLoire', GUIElement_param.triggerLoire);
        }
      };

      update();

    });



	</script>
    </head>
    <body>
    </body>
</html>
